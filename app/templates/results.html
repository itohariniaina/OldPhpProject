<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Résultats</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <h1>Résultats ({{ nb_couleurs }} couleurs)</h1>

      <div class="original-image">
        <h2>Image originale</h2>
        <img
          src="{{ url_for('static', filename='uploads/source_' + id + '.jpg') }}"
          alt="Original"
        />
      </div>

      <div class="methods-container">
        {% for method, data in results.items() %}
        <div class="method-column">
          <h2>Méthode {{ method|capitalize }}</h2>
          <div class="result-item">
            <h3>Palette</h3>
            <img
              src="{{ url_for('static', filename='output/palette_' + method + '_' + id + '.jpg') }}"
            />
          </div>
          <div class="result-item">
            <h3>Image</h3>
            <img
              src="{{ url_for('static', filename='output/recoloriee_' + method + '_' + id + '.jpg') }}"
            />
            <p>
              Erreur (Delta-E):
              <span class="error-value">{{ "%.4f"|format(data.error) }}</span>
            </p>
            <p>Temps calcul: {{ "%.4f"|format(data.time) }} s</p>
          </div>
        </div>
        {% endfor %}
      </div>

      <div class="comparison">
        <h2>Comparaison</h2>
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Méthode</th>
              <th>Erreur Delta-E</th>
              <th>Conclusion</th>
            </tr>
          </thead>
          <tbody>
            {% for method, data in results.items() %}
            <tr
              class="{{ 'best-performance' if method == best_method else '' }}"
            >
              <td>{{ method|capitalize }}</td>
              <td>{{ "%.4f"|format(data.error) }}</td>
              <td>
                {% if method == best_method %}
                <strong>Meilleure fidélité</strong>
                {% else %} - {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="actions">
        <a href="{{ url_for('index') }}" class="btn btn-primary"
          >Traiter une autre image</a
        >
      </div>
    </div>
  </body>
</html>
